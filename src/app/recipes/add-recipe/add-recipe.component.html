<div class="container">
  <div class="row">
    <div class="col-12">
      <h2>Add new recipe!</h2>
      <form [formGroup]="recipeForm" (ngSubmit)="onSubmit()">

        <h3>Basic data</h3>
        <div class="form-group">
          <label for="name">Name of the recipe</label>
          <input type="text" class="form-control" id="name" formControlName="name">
        </div>
        <div class="form-group">
          <label for="description">Short description</label>
          <input type="text" class="form-control" id="description" formControlName="description">
        </div>
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="serves">Serves (person)</label>
              <input type="number" min="1" step="1" class="form-control" id="serves" formControlName="serves">
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="time">Preparation time (minutes)</label>
              <input type="number" min="15" step="15" class="form-control" id="time" formControlName="time">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="price">Price</label>
              <select class="form-control" id="price" formControlName="price">
                <option>Inexpensive </option>
                <option>Average</option>
                <option>Costly</option>
              </select>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label for="difficulty">Difficulty</label>
              <select class="form-control" id="difficulty" formControlName="difficulty">
                <option>Easy</option>
                <option>Medium</option>
                <option>Hard</option>
              </select>
            </div>
          </div>
        </div>

        <div formArrayName="ingredients">
          <h3>Ingredients</h3>

          <div *ngFor="let ingredient of ingredients.controls; let i=index">
            <!-- The repeated ingredient template -->
            <div [formGroupName]="i">
              <div class="row">
                <div class="col-md-2 form-group">
                  <input type="number" placeholder="Quantity" min="0" class="form-control" formControlName="quantity">
                </div>
                <div class="col-md-2 form-group">
                  <input type="text" placeholder="Unit" class="form-control" formControlName="unit">
                </div>
                <div class="col-md-6 form-group">
                  <input type="text" placeholder="Name" class="form-control" formControlName="name">
                </div>
                <div class="col-md-2 form-group">
                  <button class="btn btn-danger" (click)="removeIngredient(i)">Remove</button>
                </div>
              </div>       
            </div>

          </div>
          <div class="form-group">
            <button type="button" class="btn btn-primary" (click)="addIngredient()">Add Ingredient</button>
          </div>
        </div>

        <div formArrayName="steps">
          <h3>Steps</h3>

          <div *ngFor="let step of steps.controls; let i=index">
            <!-- The repeated step template -->
            <div [formGroupName]="i">
              <div class="row">
                <div class="col-12 form-group">
                  <textarea class="form-control" placeholder="Description" formControlName="description" rows="3"></textarea>
                </div>
              </div>
              <div class="row">
                <div class="col-md-5 form-group">
                  <input type="number" placeholder="Time (minutes)" min="5" step="5" class="form-control" formControlName="time">
                </div>
                <div class="col-md-5 form-group">
                  <select class="form-control" placeholder="activity type" formControlName="active">
                    <option value="true">Active</option>
                    <option value="false">Passive</option>
                  </select>
                </div>
                <div class="col-md-2 form-group">
                  <button class="btn btn-danger" (click)="removeStep(i)">Remove</button>
                </div>
              </div>
            </div>

          </div>
          <div class="form-group">
            <button type="button" class="btn btn-primary" (click)="addStep()">Add Step</button>
          </div>
        </div>

        <h3>Picture</h3>
        <div class="form-group">
          <img class="img-fluid" src="http://ssl.gstatic.com/accounts/ui/avatar_2x.png">
          <input type="file" class="form-control-file border">
        </div>


        <button class="btn btn-primary my-2" type="submit" [disabled]="!recipeForm.valid">Submit</button>

      </form>
    </div>
  </div>
</div>
  
